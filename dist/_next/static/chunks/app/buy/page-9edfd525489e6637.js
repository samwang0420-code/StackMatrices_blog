(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{2881:function(e,s,t){Promise.resolve().then(t.bind(t,9510))},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},9510:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var r=t(7437),a=t(2265),n=t(9376),i=t(7648),l=t(4902),c=t(1837);let d={"single-research":{name:"单产品调研",price:"\xa519",description:"获取 1 个产品的多平台真实评论"},"batch-compare":{name:"批量产品对比",price:"\xa549",description:"对比 3-5 个竞品，自动生成对比报告"},"content-material":{name:"内容创作素材",price:"\xa529",description:"获取真实用户痛点 + 好评金句"},"tco-analysis":{name:"TCO 计算器",price:"\xa539",description:"真实价格数据 + 隐藏成本分析"},"competitor-monitor":{name:"竞品监控",price:"\xa599",description:"每周自动抓取指定产品新评论"},"api-developer":{name:"API 开发者包",price:"\xa5299",description:"5000 次 API 调用额度 + 技术支持"}};function o(){let e=(0,n.useSearchParams)().get("service")||"single-research",s=d[e]||d["single-research"],[t,o]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1),[p,b]=(0,a.useState)(""),{user:j,loading:f}=(0,l.a)(),g=async e=>{if(e.preventDefault(),!t){b("请上传付款截图");return}h(!0),b("");try{Date.now(),u(!0)}catch(e){console.error("Error creating order:",e),e instanceof c.S?b(e.message):b("提交订单失败，请稍后重试")}finally{h(!1)}};return f?(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"text-slate-500",children:"加载中..."})}):j?x?(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow-lg p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"订单已提交！"}),(0,r.jsx)("p",{className:"text-slate-600 mb-4",children:"我们会尽快审核你的付款截图，审核通过后你将在用户面板看到 License Key。"}),(0,r.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4 mb-6 text-left",children:[(0,r.jsxs)("p",{className:"text-sm text-slate-600",children:["服务: ",s.name]}),(0,r.jsxs)("p",{className:"text-sm text-slate-600",children:["金额: ",s.price]}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"状态: 等待审核"})]}),(0,r.jsx)(i.default,{href:"/dashboard",className:"block w-full py-3 px-4 bg-primary text-white font-bold rounded-lg hover:bg-primary-hover transition-colors",children:"查看订单"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-primary p-6 text-white",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"购买服务"}),(0,r.jsx)("p",{className:"text-white/80",children:s.name})]}),p&&(0,r.jsx)("div",{className:"mx-6 mt-6 p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:p}),(0,r.jsxs)("form",{onSubmit:g,className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-slate-50 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-slate-600 mb-2",children:s.description}),(0,r.jsx)("p",{className:"text-2xl font-bold text-primary",children:s.price})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"扫码支付"}),(0,r.jsxs)("div",{className:"bg-slate-50 rounded-lg p-6 text-center",children:[(0,r.jsxs)("p",{className:"text-slate-600 mb-4",children:["请支付 ",(0,r.jsx)("span",{className:"font-bold text-primary text-xl",children:s.price})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-6 mb-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-40 h-40 bg-slate-200 rounded-lg flex items-center justify-center mb-2",children:(0,r.jsx)("span",{className:"text-slate-400 text-sm",children:"支付宝二维码"})}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"支付宝"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-40 h-40 bg-slate-200 rounded-lg flex items-center justify-center mb-2",children:(0,r.jsx)("span",{className:"text-slate-400 text-sm",children:"微信二维码"})}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"微信支付"})]})]}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"请使用支付宝或微信扫码支付上方金额"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"上传付款截图"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-primary transition-colors",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s;return o((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)},className:"hidden",id:"screenshot"}),(0,r.jsx)("label",{htmlFor:"screenshot",className:"cursor-pointer",children:t?(0,r.jsxs)("div",{className:"text-green-600",children:[(0,r.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsxs)("p",{children:["已选择: ",t.name]})]}):(0,r.jsxs)("div",{className:"text-slate-500",children:[(0,r.jsx)("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("p",{children:"点击上传付款截图"}),(0,r.jsx)("p",{className:"text-xs",children:"支持 JPG、PNG 格式"})]})})]})]}),(0,r.jsx)("button",{type:"submit",disabled:m||!t,className:"w-full py-3 px-4 bg-primary text-white font-bold rounded-lg hover:bg-primary-hover transition-colors disabled:opacity-50",children:m?"提交中...":"提交订单"}),(0,r.jsx)("p",{className:"text-center text-sm text-slate-500",children:"提交后请等待审核，审核通过后你将在用户面板看到 License Key"})]})]})})}):(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"请先登录"}),(0,r.jsx)("p",{className:"text-slate-600 mb-6",children:"购买服务需要先登录账号"}),(0,r.jsx)(i.default,{href:"/login?redirect=".concat(encodeURIComponent("/buy?service=".concat(e))),className:"inline-block py-3 px-6 bg-primary text-white font-bold rounded-lg hover:bg-primary-hover transition-colors",children:"去登录"})]})})}function m(){return(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:"加载中..."}),children:(0,r.jsx)(o,{})})}},4902:function(e,s,t){"use strict";t.d(s,{AuthProvider:function(){return l},a:function(){return c}});var r=t(7437),a=t(2265);let n=(0,t(3053).eI)("https://fixemvsckapejyfwphft.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZpeGVtdnNja2FwZWp5ZndwaGZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5MTQ3MzUsImV4cCI6MjA4NzQ5MDczNX0.3TC1YUPqQpix7YWedmsHrDOcQWhhK0HcL1CKRp0S86lPsJsBefPPAUdDmKXMXpVbheItdVrwamW0YfUm1EAwRQ=="),i=(0,a.createContext)(void 0);function l(e){let{children:s}=e,[t,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{n.auth.getSession().then(e=>{let{data:{session:s}}=e;(null==s?void 0:s.user)&&l({id:s.user.id,email:s.user.email}),d(!1)});let{data:{subscription:e}}=n.auth.onAuthStateChange((e,s)=>{(null==s?void 0:s.user)?l({id:s.user.id,email:s.user.email}):l(null)});return()=>e.unsubscribe()},[]);let o=async(e,s)=>{let{error:t}=await n.auth.signInWithPassword({email:e,password:s});return{error:t}},m=async(e,s)=>{let{error:t}=await n.auth.signUp({email:e,password:s,options:{emailRedirectTo:"".concat(window.location.origin,"/dashboard")}});return{error:t}},h=async()=>{await n.auth.signOut(),l(null)};return(0,r.jsx)(i.Provider,{value:{user:t,loading:c,signIn:o,signUp:m,signOut:h},children:s})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1837:function(e,s,t){"use strict";t.d(s,{S:function(){return r},h:function(){return n}});class r extends Error{constructor(e,s){super(e),this.status=s,this.name="ApifyAPIError"}}async function a(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat("https://api.gspr-hub.site/v1").concat(e),a=localStorage.getItem("sb-access-token"),n={"Content-Type":"application/json",...s.headers};a&&(n.Authorization="Bearer ".concat(a));let i=await fetch(t,{...s,headers:n});if(!i.ok)throw new r((await i.json().catch(()=>({detail:"Unknown error"}))).detail||"HTTP ".concat(i.status),i.status);return i.json()}let n={getMe:async()=>a("/auth/me"),getMyLicenses:async()=>a("/licenses/my"),getLicenseUsage:async e=>a("/licenses/".concat(e,"/usage")),createOrder:async(e,s)=>a("/orders/create",{method:"POST",body:JSON.stringify({tier:e,screenshot_url:s})}),getMyOrders:async()=>a("/orders/my"),async searchReviews(e,s,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return a("/reviews/search",{method:"POST",headers:{"X-License-Key":t},body:JSON.stringify({product:e,source:s,limit:r})})}}}},function(e){e.O(0,[972,434,16,971,117,744],function(){return e(e.s=2881)}),_N_E=e.O()}]);